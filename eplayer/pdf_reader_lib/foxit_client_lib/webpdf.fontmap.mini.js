function GetFontBuffer(a){postMessage({type:"loadFontInfo",status:1});var b=new XMLHttpRequest,c=UTF8ToString(a);b.open("get",baseFontUrl+c,!1),b.responseType="arraybuffer";try{b.send()}catch(d){return m_FontSize=0,null}var e=b.response,f=new Uint8Array(e);f=brotli.decompress(f,null);var g=Module._malloc(f.length*f.BYTES_PER_ELEMENT);return Module.HEAPU8.set(f,g),fontSize=f.length,g}function GetFontBufferSize(){return fontSize}function adjustFontName(a){return a=a.replace(/-/g,""),a=a.replace(/\s/g,""),a=a.toLowerCase()}function isMatchFontName(a,b){if(null==a||null==b)return!1;for(var c=b.split("_"),d=0;d<c.length;d++)if(-1!=a.indexOf(c[d]))return!0;return!1}function matchFixedPitch(a,b,c){var d=null;return 1&b&&(void 0!=fontMap[c].monoRegular&&null!=fontMap[c].monoRegular&&(d=fontMap[c].monoRegular),(16384&b||-1!=a.indexOf("bold")||-1!=a.indexOf("heavy"))&&(void 0!=fontMap[c].monoBold||""!=fontMap[c].monoBold)&&(d=fontMap[c].monoBold)),d}function matchSerif(a,b,c){var d=null;return 2&b&&(void 0!=fontMap[c].serif&&null!=fontMap[c].serif&&(d=fontMap[c].serif),(16384&b||-1!=a.indexOf("bold")||-1!=a.indexOf("heavy"))&&(void 0!=fontMap[c].serifBold||""!=fontMap[c].serifBold)&&(d=fontMap[c].serifBold)),d}function matchWeight(a,b){var c=null;switch(a){case 100:void 0!=fontMap[b].thin&&null!=fontMap[b].thin&&(c=fontMap[b].thin);break;case 200:void 0!=fontMap[b].light&&null!=fontMap[b].light&&(c=fontMap[b].light);break;case 300:void 0!=fontMap[b].normal&&null!=fontMap[b].normal&&(c=fontMap[b].normal);break;case 400:break;case 500:break;case 700:void 0!=fontMap[b].bold&&null!=fontMap[b].bold&&(c=fontMap[b].bold);break;case 900:void 0!=fontMap[b].black&&null!=fontMap[b].black&&(c=fontMap[b].black)}return c}function matchBold(a,b,c){var d=null;return(16384&b||-1!=a.indexOf("bold")||-1!=a.indexOf("heavy")||-1!=a.indexOf("black"))&&(void 0!=fontMap[c].bold||""!=fontMap[c].bold)&&(d=fontMap[c].bold),d}function GetFontFileName(a,b,c,d,e){var f=UTF8ToString(a);if(f=adjustFontName(f),null==f||""==f)return null;var g="",h=255&b;for(i=0;i<fontMap.length;i++){var j=isMatchFontName(f,fontMap[i].fontName);if(j||fontMap[i].charSet==h){if(0==h&&0==j)continue;if(g=matchSerif(f,e,i),null!=g)break;if(g=matchFixedPitch(f,e,i),null!=g)break;void 0!=fontMap[i].regular&&null!=fontMap[i].regular&&(g=fontMap[i].regular);var k=matchWeight(d,i);null!=k&&(g=k),k=matchBold(f,e,i),null!=k&&(g=k);break}}if(""!=g&&null!=g){var l=Module._malloc(g.length+1);return writeStringToMemory(g,l),l}return null}importScripts("./brotli.js");var baseFontUrl="http://webpdf.foxitsoftware.com/webfonts/",xml=new XMLHttpRequest;xml.open("GET",baseUrl+"api/config/fontUrl",!1),xml.responseType="text";try{xml.send()}catch(ex){}if(200==xml.status){var responseText=xml.responseText,responseJSON=JSON.parse(responseText);baseFontUrl=responseJSON.result}var fontMap=[{fontName:"franklin",charSet:0,bold:"NotoSans-Bold.ttf.brotli",boldItalic:"NotoSans-BoldItalic.ttf.brotli"},{fontName:"youyuan_simhei_simsun_song_仿宋_黑体_宋体",charSet:-1,regular:"NotoSansMonoCJKsc-Regular.otf.brotli",bold:"NotoSansMonoCJKsc-Bold.otf.brotli"},{fontName:"meiryo_meiryoui_msgothic_msmincho_mspgothic_mspmincho_uigothic",charSet:128,regular:"NotoSansCJKjp-Regular.otf.brotli",thin:"NotoSansCJKjp-Thin.otf.brotli",light:"NotoSansCJKjp-Light.otf.brotli",normal:"NotoSansCJKjp-DemiLight.otf.brotli",medium:"NotoSansCJKjp-Medium.otf.brotli",bold:"NotoSansCJKjp-Bold.otf.brotli",black:"NotoSansCJKjp-Black.otf.brotli",monoRegular:"NotoSansMonoCJKjp-Regular.otf.brotli",monoBold:"NotoSansMonoCJKjp-Bold.otf.brotli"},{fontName:"Korean",charSet:129,regular:"NotoSansCJKkr-Regular.otf.brotli",thin:"NotoSansCJKkr-Thin.otf.brotli",light:"NotoSansCJKkr-Light.otf.brotli",normal:"NotoSansCJKkr-DemiLight.otf.brotli",medium:"NotoSansCJKkr-Medium.otf.brotli",bold:"NotoSansCJKkr-Bold.otf.brotli",black:"NotoSansCJKkr-Black.otf.brotli",monoRegular:"NotoSansMonoCJKkr-Regular.otf.brotli",monoBold:"NotoSansMonoCJKkr-Bold.otf.brotli"},{fontName:"simhei_simsun_simsunextb_方正_仿宋_黑体_华文_楷体_隶书_宋体_微软雅黑_新宋体_幼圆",charSet:134,regular:"NotoSansCJKsc-Regular.otf.brotli",thin:"NotoSansCJKsc-Thin.otf.brotli",light:"NotoSansCJKsc-Light.otf.brotli",normal:"NotoSansCJKsc-DemiLight.otf.brotli",medium:"NotoSansCJKsc-Medium.otf.brotli",bold:"NotoSansCJKsc-Bold.otf.brotli",black:"NotoSansCJKsc-Black.otf.brotli",monoRegular:"NotoSansMonoCJKsc-Regular.otf.brotli",monoBold:"NotoSansMonoCJKsc-Bold.otf.brotli"},{fontName:"dfkaisb_microsoftjhenghei_mingliu_mingliuhkscs_mingliuhkscsextb_mingliuextb_pmingliu_pmingliuextb",charSet:136,regular:"NotoSansMonoCJKtc-Regular.otf.brotli",thin:"NotoSansCJKtc-Thin.otf.brotli",light:"NotoSansCJKtc-Light.otf.brotli",normal:"NotoSansCJKtc-DemiLight.otf.brotli",medium:"NotoSansCJKtc-Medium.otf.brotli",bold:"NotoSansCJKtc-Bold.otf.brotli",black:"NotoSansCJKtc-Black.otf.brotli",monoRegular:"NotoSansMonoCJKtc-Regular.otf.brotli",monoBold:"NotoSansMonoCJKtc-Bold.otf.brotli"},{fontName:"arabic_andalus_arabictypesetting_sakkalmajalla_simplifiedarabic_simplifiedarabicfixed_traditionalarabic",charSet:178,regular:"NotoNaskhArabic-Regular.ttf.brotli",bold:"NotoNaskhArabic-Bold.ttf.brotli"},{fontName:"angsananew_angsanaupc_browallianew_browalliaupc_cordianew_cordiaupc_eucrosiaupc_freesiaupc_irisupc_jasmineupc_kodchiangupc_leelawadee_lilyupc",charSet:222,regular:"NotoSansThai-Regular.ttf.brotli",bold:"NotoSansThai-Bold.ttf.brotli",serif:"NotoSerifThai-Regular.ttf.brotli",serifBold:"NotoSerifThai-Bold.ttf.brotli"},{fontName:"aharoni_david_frankruehl_gisha_levenimmt_miriam_narkism_rod",charSet:-1,regular:"NotoSansHebrew-Regular.ttf.brotli",bold:"NotoSansHebrew-Bold.ttf.brotli"},{fontName:"arial_sylfaen_tahoma_couriernew_lucidasansunicode_timesnewroman_calibri_cambria_candara_comicsansms_consolas_constantia_corbel_franklingothic_gabriola_georgia_impact_lucidaconsole_microsoftsansserif_msrefrencesansserif_palatinolinotype_segoeprint_segoescript_segoeui_trebuchetms_verdana_helvetica",charSet:-1,regular:"NotoSans-Regular.ttf.brotli",bold:"NotoSans-Bold.ttf.brotli"},{fontName:"yi_microsoftyibati",charSet:-1,regular:"NotoSansYi-Regular.ttf.brotli"},{fontName:"daunpenh_khmer_moolboran",charSet:-1,regular:"NotoSansKhmer-Regular.ttf.brotli",bold:"NotoSansKhmer-Bold.ttf.brotli",serif:"NotoSerifKhmer-Regular.ttf.brotli",serifBold:"NotoSerifKhmer-Bold.ttf.brotli"},{fontName:"dokchampa_lao",charSet:-1,regular:"NotoSansLao-Regular.ttf.brotli",bold:"NotoSansLao-Bold.ttf.brotli",serif:"NotoSerifLao-Regular.ttf.brotli",serifBold:"NotoSerifLao-Bold.ttf.brotli"},{fontName:"vani_gautami",charSet:-1,regular:"NotoSansTelugu-Regular.ttf.brotli",bold:"NotoSansTelugu-Bold.ttf.brotli"},{fontName:"latha_vijaya",charSet:-1,regular:"NotoSansTamil-Regular.ttf.brotli",bold:"NotoSansTamil-Bold.ttf.brotli"},{fontName:"moboli_mvboli",charSet:-1,regular:"NotoSansThaana-Regular.ttf.brotli",bold:"NotoSansThaana-Bold.ttf.brotli"},{fontName:"taile_microsofttaile",charSet:-1,regular:"NotoSansTaiLe-Regular.ttf.brotli"},{fontName:"estrangeloedessa",charSet:-1,regular:"NotoSansSyriacEastern-Regular.ttf.brotli"},{fontName:"iskoolapota",charSet:-1,regular:"NotoSansSinhala-Regular.ttf.brotli",bold:"NotoSansSinhala-Bold.ttf.brotli"},{fontName:"himalaya_microsofthimalaya",charSet:-1,regular:"NotoSansTibetan-Regular.ttf.brotli",bold:"NotoSansTibetan-Bold.ttf.brotli"},{fontName:"phagspa_microsoftphagspa",charSet:-1,regular:"NotoSansPhagsPa-Regular.ttf.brotli"},{fontName:"euphemia_gadugi",charSet:-1,regular:"NotoSansCanadianAboriginal-Regular.ttf.brotli"},{fontName:"plantagenetcherokee",charSet:-1,regular:"NotoSansCherokee-Regular.ttf.brotli"},{fontName:"nyala_ebrima",charSet:-1,regular:"NotoSansEthiopic-Regular.ttf.brotli",bold:"NotoSansEthiopic-Bold.ttf.brotli"},{fontName:"shruti",charSet:-1,regular:"NotoSansGujarati-Regular.ttf.brotli",bold:"NotoSansGujarati-Bold.ttf.brotli"},{fontName:"mongolian_mongolianbaiti",charSet:-1,regular:"NotoSansMongolian-Regular.ttf.brotli"},{fontName:"nirmalaui",charSet:-1,regular:"NotoNirmalaui-Regular.ttf.brotli"}],fontSize;